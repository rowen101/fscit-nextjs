{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Rowen\\\\Desktop\\\\expo\\\\fscit-nextjs\\\\pages\\\\warehouse-management\\\\customer\\\\index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { DataGrid } from \"@material-ui/data-grid\";\nimport { Typography, Breadcrumbs, Link, Paper, makeStyles, TableBody, TableRow, TableCell, Toolbar, InputAdornment, Button, TextField, Grid, Checkbox, ListItemText, DialogActions } from \"@material-ui/core\";\nimport Popup from \"../../../components/Popup\";\nimport PageHeader from \"../../../components/PageHeader\";\nimport { PeopleAltTwoTone, PeopleOutlineTwoToneIcon } from \"@material-ui/icons\";\nimport CustomerForm from \"./CustomerForm\";\nimport EditOutlinedIcon from \"@material-ui/icons/EditOutlined\";\nimport CloseIcon from \"@material-ui/icons/Close\";\nimport Controls from \"../../../components/controls/Controls\";\nimport useTable from \"../../../components/useTable\";\nimport { Search } from \"@material-ui/icons\";\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport RadioButtonUncheckedRoundedIcon from \"@material-ui/icons/RadioButtonUncheckedRounded\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport axios from \"axios\";\nimport api from \"../../../Services/api\";\nimport PopDialog from \"../../../components/PopDialog\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    \"& .MuiFormControl-root\": {\n      width: \"80%\",\n      margin: theme.spacing(1)\n    }\n  },\n  pageContent: {\n    margin: theme.spacing(5),\n    padding: theme.spacing(2)\n  },\n  searchInput: {\n    width: \"50%\",\n    height: 40\n  },\n  newButton: {\n    position: \"absolute\",\n    right: \"36px\"\n  }\n}));\nexport default function index() {\n  const classes = useStyles();\n  const {\n    0: recordForEdit,\n    1: setRecordForEdit\n  } = useState(null);\n  const {\n    0: recordForRemove,\n    1: setRecordForRemove\n  } = useState(null);\n  const {\n    0: listrecordData,\n    1: setlistRecordData\n  } = useState([]);\n  const {\n    0: filterFn,\n    1: setFilterFn\n  } = useState({\n    fn: items => {\n      return items;\n    }\n  });\n  const {\n    0: openDialog,\n    1: setOpenDialog\n  } = useState(false);\n  const {\n    0: openPopup,\n    1: setOpenPopup\n  } = useState(false);\n  const {\n    0: captionDialog,\n    1: setCaptionDialog\n  } = useState(\"\");\n  const headCells = [{\n    id: \"customer_code\",\n    label: \"Customer Code\"\n  }, {\n    id: \"customer_name\",\n    label: \"Customer Name\"\n  }, {\n    id: \"freshness_requirement\",\n    label: \"Freshness requirement\"\n  }, {\n    id: \"freshness_unit\",\n    label: \"Freshness Unit\"\n  }, {\n    id: \"customer_category\",\n    label: \"Category\"\n  }, {\n    id: \"status\",\n    label: \"Status\"\n  }, {\n    id: \"actions\",\n    label: \"Actions\",\n    disableSorting: true\n  }];\n  const {\n    TblContainer,\n    TblHead,\n    TblPagination,\n    recordsAfterPagingAndSorting\n  } = useTable(listrecordData, headCells, filterFn);\n\n  const DelopenHandlerDialog = item => {\n    setRecordForRemove(item);\n    setCaptionDialog(item.customer_code);\n    setOpenDialog(true);\n  };\n\n  const removeItem = () => {\n    api.instance.delete(\"/wms/customer/customer-destroy/\" + recordForRemove.id).then(resp => {\n      console.log(resp.data);\n      refreshListData();\n    }).catch(err => {\n      console.log(err);\n    });\n    setOpenDialog(false);\n  };\n\n  const handleSearch = e => {\n    let target = e.target;\n    setFilterFn({\n      fn: items => {\n        if (target.value == \"\") return items;else return items.filter(x => x.customer_code.toLowerCase().includes(target.value) || x.customer_name.toLowerCase().includes(target.value) || x.customer_category.toLowerCase().includes(target.value));\n      }\n    });\n  };\n\n  const onSubmit = (values, resetForm) => {\n    if (values.id == 0) api.instance.post(\"/wms/customer/customer-store\", values).then(resp => {\n      console.log(resp.data);\n      refreshListData();\n    }).catch(err => {\n      console.log(err);\n    });else {\n      api.instance.put(\"/wms/customer/customer-update/\" + values.id, values).then(resp => {\n        console.log(resp.data);\n        refreshListData();\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n    resetForm();\n    setRecordForEdit(null);\n    setOpenPopup(false);\n  };\n\n  const openInPopup = item => {\n    setRecordForEdit(item);\n    setOpenPopup(true);\n  };\n\n  const refreshListData = () => {\n    const utoken = localStorage.getItem(\"token\");\n    api.instance.get(\"/wms/customer/customer-list\", {\n      headers: {\n        Authorization: `Bearer ${utoken}`,\n        Accept: \"application/json\"\n      }\n    }).then(resp => {\n      setlistRecordData(resp.data);\n      console.log(resp.data);\n    }).catch(err => {\n      console.log(err.data);\n    });\n  };\n\n  useEffect(() => {\n    refreshListData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Breadcrumbs, {\n      \"aria-label\": \"breadcrumb\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        color: \"inherit\",\n        href: \"/\",\n        children: \"Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        color: \"inherit\",\n        href: \"/warehouse-management/\",\n        children: \"Warehouse Management\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        color: \"textPrimary\",\n        children: \"Customer Master\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: /*#__PURE__*/_jsxDEV(Controls.Button, {\n          text: \"Add New\",\n          startIcon: /*#__PURE__*/_jsxDEV(AddIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 24\n          }, this),\n          className: classes.newButton,\n          onClick: () => {\n            setOpenPopup(true);\n            setRecordForEdit(null);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      className: classes.pageContent,\n      children: [/*#__PURE__*/_jsxDEV(Controls.Input, {\n        label: \"Search\",\n        className: classes.searchInput,\n        InputProps: {\n          startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n            position: \"start\",\n            children: /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 15\n          }, this)\n        },\n        onChange: handleSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TblContainer, {\n        children: [/*#__PURE__*/_jsxDEV(TblHead, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          children: recordsAfterPagingAndSorting().map(item => /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: item.customer_code\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: item.customer_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: item.freshness_requirement\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: item.freshness_unit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: item.customer_category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: item.status == 1 ? /*#__PURE__*/_jsxDEV(CheckCircleIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(RadioButtonUncheckedRoundedIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: [/*#__PURE__*/_jsxDEV(Controls.ActionButton, {\n                color: \"primary\",\n                onClick: () => {\n                  openInPopup(item);\n                },\n                children: /*#__PURE__*/_jsxDEV(EditOutlinedIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Controls.ActionButton, {\n                color: \"secondary\",\n                onClick: () => {\n                  DelopenHandlerDialog(item);\n                },\n                children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this)]\n          }, item.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TblPagination, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PopDialog, {\n      title: \"Delete Customer\",\n      description: \"Are you sure do want to delete Supplier code \" + captionDialog,\n      openDialog: openDialog,\n      setOpenDialog: setOpenDialog,\n      children: /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: removeItem,\n          color: \"primary\",\n          autoFocus: true,\n          children: \"Agree\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Popup, {\n      title: \"Customer Form\",\n      openPopup: openPopup,\n      setOpenPopup: setOpenPopup,\n      children: /*#__PURE__*/_jsxDEV(CustomerForm, {\n        recordForEdit: recordForEdit,\n        addOrEdit: onSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}","map":{"version":3,"sources":["C:/Users/Rowen/Desktop/expo/fscit-nextjs/pages/warehouse-management/customer/index.js"],"names":["React","useState","useEffect","DataGrid","Typography","Breadcrumbs","Link","Paper","makeStyles","TableBody","TableRow","TableCell","Toolbar","InputAdornment","Button","TextField","Grid","Checkbox","ListItemText","DialogActions","Popup","PageHeader","PeopleAltTwoTone","PeopleOutlineTwoToneIcon","CustomerForm","EditOutlinedIcon","CloseIcon","Controls","useTable","Search","CheckCircleIcon","RadioButtonUncheckedRoundedIcon","AddIcon","axios","api","PopDialog","useStyles","theme","root","width","margin","spacing","pageContent","padding","searchInput","height","newButton","position","right","index","classes","recordForEdit","setRecordForEdit","recordForRemove","setRecordForRemove","listrecordData","setlistRecordData","filterFn","setFilterFn","fn","items","openDialog","setOpenDialog","openPopup","setOpenPopup","captionDialog","setCaptionDialog","headCells","id","label","disableSorting","TblContainer","TblHead","TblPagination","recordsAfterPagingAndSorting","DelopenHandlerDialog","item","customer_code","removeItem","instance","delete","then","resp","console","log","data","refreshListData","catch","err","handleSearch","e","target","value","filter","x","toLowerCase","includes","customer_name","customer_category","onSubmit","values","resetForm","post","put","openInPopup","utoken","localStorage","getItem","get","headers","Authorization","Accept","startAdornment","map","freshness_requirement","freshness_unit","status"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { DataGrid } from \"@material-ui/data-grid\";\r\n\r\nimport {\r\n  Typography,\r\n  Breadcrumbs,\r\n  Link,\r\n  Paper,\r\n  makeStyles,\r\n  TableBody,\r\n  TableRow,\r\n  TableCell,\r\n  Toolbar,\r\n  InputAdornment,\r\n  Button,\r\n  TextField,\r\n  Grid,\r\n  Checkbox,\r\n  ListItemText,\r\n  DialogActions,\r\n} from \"@material-ui/core\";\r\n\r\nimport Popup from \"../../../components/Popup\";\r\nimport PageHeader from \"../../../components/PageHeader\";\r\nimport { PeopleAltTwoTone, PeopleOutlineTwoToneIcon } from \"@material-ui/icons\";\r\nimport CustomerForm from \"./CustomerForm\";\r\nimport EditOutlinedIcon from \"@material-ui/icons/EditOutlined\";\r\nimport CloseIcon from \"@material-ui/icons/Close\";\r\nimport Controls from \"../../../components/controls/Controls\";\r\nimport useTable from \"../../../components/useTable\";\r\nimport { Search } from \"@material-ui/icons\";\r\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\r\nimport RadioButtonUncheckedRoundedIcon from \"@material-ui/icons/RadioButtonUncheckedRounded\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport axios from \"axios\";\r\nimport api from \"../../../Services/api\";\r\nimport PopDialog from \"../../../components/PopDialog\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    \"& .MuiFormControl-root\": {\r\n      width: \"80%\",\r\n      margin: theme.spacing(1),\r\n    },\r\n  },\r\n  pageContent: {\r\n    margin: theme.spacing(5),\r\n    padding: theme.spacing(2),\r\n  },\r\n  searchInput: {\r\n    width: \"50%\",\r\n    height: 40,\r\n  },\r\n\r\n  newButton: {\r\n    position: \"absolute\",\r\n    right: \"36px\",\r\n  },\r\n}));\r\nexport default function index() {\r\n  const classes = useStyles();\r\n  const [recordForEdit, setRecordForEdit] = useState(null);\r\n  const [recordForRemove, setRecordForRemove] = useState(null);\r\n  const [listrecordData, setlistRecordData] = useState([]);\r\n  const [filterFn, setFilterFn] = useState({\r\n    fn: (items) => {\r\n      return items;\r\n    },\r\n  });\r\n  const [openDialog, setOpenDialog] = useState(false);\r\n  const [openPopup, setOpenPopup] = useState(false);\r\n  const [captionDialog, setCaptionDialog] = useState(\"\");\r\n  const headCells = [\r\n    { id: \"customer_code\", label: \"Customer Code\" },\r\n    { id: \"customer_name\", label: \"Customer Name\" },\r\n    { id: \"freshness_requirement\", label: \"Freshness requirement\" },\r\n    { id: \"freshness_unit\", label: \"Freshness Unit\" },\r\n    { id: \"customer_category\", label: \"Category\" },\r\n    { id: \"status\", label: \"Status\" },\r\n    { id: \"actions\", label: \"Actions\", disableSorting: true },\r\n  ];\r\n\r\n  const { TblContainer, TblHead, TblPagination, recordsAfterPagingAndSorting } =\r\n    useTable(listrecordData, headCells, filterFn);\r\n\r\n  const DelopenHandlerDialog = (item) => {\r\n    setRecordForRemove(item);\r\n    setCaptionDialog(item.customer_code);\r\n    setOpenDialog(true);\r\n  };\r\n  const removeItem = () => {\r\n    api.instance\r\n      .delete(\"/wms/customer/customer-destroy/\" + recordForRemove.id)\r\n      .then((resp) => {\r\n        console.log(resp.data);\r\n        refreshListData();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    setOpenDialog(false);\r\n  };\r\n  const handleSearch = (e) => {\r\n    let target = e.target;\r\n    setFilterFn({\r\n      fn: (items) => {\r\n        if (target.value == \"\") return items;\r\n        else\r\n          return items.filter(\r\n            (x) =>\r\n              x.customer_code.toLowerCase().includes(target.value) ||\r\n              x.customer_name.toLowerCase().includes(target.value) ||\r\n              x.customer_category.toLowerCase().includes(target.value)\r\n          );\r\n      },\r\n    });\r\n  };\r\n  const onSubmit = (values, resetForm) => {\r\n    if (values.id == 0)\r\n      api.instance\r\n        .post(\"/wms/customer/customer-store\", values)\r\n        .then((resp) => {\r\n          console.log(resp.data);\r\n          refreshListData();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    else {\r\n      api.instance\r\n        .put(\"/wms/customer/customer-update/\" + values.id, values)\r\n        .then((resp) => {\r\n          console.log(resp.data);\r\n          refreshListData();\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    }\r\n    resetForm();\r\n    setRecordForEdit(null);\r\n    setOpenPopup(false);\r\n  };\r\n\r\n  const openInPopup = (item) => {\r\n    setRecordForEdit(item);\r\n    setOpenPopup(true);\r\n  };\r\n  const refreshListData = () => {\r\n    const utoken = localStorage.getItem(\"token\");\r\n    api.instance\r\n      .get(\"/wms/customer/customer-list\", {\r\n        headers: {\r\n          Authorization: `Bearer ${utoken}`,\r\n          Accept: \"application/json\",\r\n        },\r\n      })\r\n\r\n      .then((resp) => {\r\n        setlistRecordData(resp.data);\r\n        console.log(resp.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.data);\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    refreshListData();\r\n  }, []);\r\n  return (\r\n    <>\r\n      <Breadcrumbs aria-label=\"breadcrumb\">\r\n        <Link color=\"inherit\" href=\"/\">\r\n          Home\r\n        </Link>\r\n        <Link color=\"inherit\" href=\"/warehouse-management/\">\r\n          Warehouse Management\r\n        </Link>\r\n        <Typography color=\"textPrimary\">Customer Master</Typography>\r\n      </Breadcrumbs>\r\n\r\n      <div>\r\n        <Toolbar>\r\n          <Controls.Button\r\n            text=\"Add New\"\r\n            startIcon={<AddIcon />}\r\n            className={classes.newButton}\r\n            onClick={() => {\r\n              setOpenPopup(true);\r\n              setRecordForEdit(null);\r\n            }}\r\n          />\r\n        </Toolbar>\r\n      </div>\r\n\r\n      <Paper className={classes.pageContent}>\r\n        <Controls.Input\r\n          label=\"Search\"\r\n          className={classes.searchInput}\r\n          InputProps={{\r\n            startAdornment: (\r\n              <InputAdornment position=\"start\">\r\n                <Search />\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n          onChange={handleSearch}\r\n        />\r\n        <TblContainer>\r\n          <TblHead />\r\n          <TableBody>\r\n            {recordsAfterPagingAndSorting().map((item) => (\r\n              <TableRow key={item.id}>\r\n                <TableCell>{item.customer_code}</TableCell>\r\n                <TableCell>{item.customer_name}</TableCell>\r\n                <TableCell>{item.freshness_requirement}</TableCell>\r\n                <TableCell>{item.freshness_unit}</TableCell>\r\n                <TableCell>{item.customer_category}</TableCell>\r\n                <TableCell>\r\n                  {item.status == 1 ? (\r\n                    <CheckCircleIcon />\r\n                  ) : (\r\n                    <RadioButtonUncheckedRoundedIcon />\r\n                  )}\r\n                </TableCell>\r\n\r\n                <TableCell>\r\n                  <Controls.ActionButton\r\n                    color=\"primary\"\r\n                    onClick={() => {\r\n                      openInPopup(item);\r\n                    }}\r\n                  >\r\n                    <EditOutlinedIcon fontSize=\"small\" />\r\n                  </Controls.ActionButton>\r\n                  <Controls.ActionButton\r\n                    color=\"secondary\"\r\n                    onClick={() => {\r\n                      DelopenHandlerDialog(item);\r\n                    }}\r\n                  >\r\n                    <CloseIcon fontSize=\"small\" />\r\n                  </Controls.ActionButton>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </TblContainer>\r\n        <TblPagination />\r\n      </Paper>\r\n      <PopDialog\r\n        title=\"Delete Customer\"\r\n        description={\r\n          \"Are you sure do want to delete Supplier code \" + captionDialog\r\n        }\r\n        openDialog={openDialog}\r\n        setOpenDialog={setOpenDialog}\r\n      >\r\n        <DialogActions>\r\n          {/* <Button color=\"primary\">Disagree</Button> */}\r\n          <Button onClick={removeItem} color=\"primary\" autoFocus>\r\n            Agree\r\n          </Button>\r\n        </DialogActions>\r\n      </PopDialog>\r\n\r\n      <Popup\r\n        title=\"Customer Form\"\r\n        openPopup={openPopup}\r\n        setOpenPopup={setOpenPopup}\r\n      >\r\n        <CustomerForm recordForEdit={recordForEdit} addOrEdit={onSubmit} />\r\n      </Popup>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}